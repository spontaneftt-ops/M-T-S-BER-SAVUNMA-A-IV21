from moviepy.editor import TextClip, CompositeVideoClip, ColorClip

# Video Ayarları
screensize = (1920, 1080)
fps = 24

# 1. Bölüm: Uyarı Yazısı
warning_text = TextClip(
    "TEHLİKE: SİBER GÜVENLİK İHLALİ!\nYOK ETME PROTOKOLÜ DEVREDE",
    fontsize=70, color='red', font='Arial-Bold', method='caption', size=screensize
).set_duration(3)

# 2. Bölüm: Geri Sayım Fonksiyonu
def create_countdown_clip(number, duration=1):
    return TextClip(
        str(number), fontsize=200, color='red', font='Arial-Bold', size=screensize
    ).set_duration(duration)

countdowns = [create_countdown_clip(i) for i in range(5, 0, -1)]

# 3. Bölüm: Yeniden Başlatma Yazısı
reboot_text = TextClip(
    "SİSTEM YENİDEN BAŞLATILIYOR...\nLÜTFEN BEKLEYİN",
    fontsize=60, color='lime', font='Courier-Bold', method='caption', size=screensize
).set_duration(4)

# Tüm klipleri ardışık olarak birleştirme
final_video = CompositeVideoClip([
    warning_text,
    *[c.set_start(3 + i) for i, c in enumerate(countdowns)],
    reboot_text.set_start(8)
])

# Videoyu Kaydetme
final_video.write_videofile("siber_protokol.mp4", fps=fps)
